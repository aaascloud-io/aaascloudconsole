<div class="app-content content">
  <div class="content-wrapper">
    <div class="content-header row mb-1"></div>
    <div class="content-detached">
      <div class="content-body">
        <div>
          <label for="switch">条件検索：</label>
          <input id="switch" name="switch" type="checkbox" [(ngModel)]="showSearch" />
        </div>
        <section class="row" *ngIf="showSearch">
          <div class="col-12">
            <div class="card">
              <div class="card-content">
                <div class="card-body">
                  <div class="row">
                    <div class="col-md-3">
                      <div class="form-group">
                        <label for="">会社名</label>
                        <input type="text" class="form-control" id="" placeholder=""
                          [(ngModel)]="pageModel.query.companyname">
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label for="">ユーザー姓</label>
                        <input type="text" class="form-control" id="" placeholder=""
                          [(ngModel)]="pageModel.query.lastname">
                      </div>
                    </div>
                    <div class="col-md-2">
                      <div class="form-group">
                        <label for="">ユーザー名</label>
                        <input type="text" class="form-control" id="" placeholder=""
                          [(ngModel)]="pageModel.query.firstname">
                      </div>
                    </div>
                    <div class="col-md-3">
                      <div class="form-group">
                        <label for="">メール</label>
                        <input type="text" class="form-control" id="" placeholder=""
                          [(ngModel)]="pageModel.query.email">
                      </div>
                    </div>
                    <div class="col-md-12">
                      <div class="form-group">
                        <div class="heading-elements mt-0 pull-right" style="padding-top:20px;">
                          <button class="btn btn-primary btn-sm gap_contact" (click)="searchMyUsers()">
                            <i class="d-md-none d-block feather ft-plus white"></i>
                            <span class="d-md-block d-none">検　索</span></button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <div class="row">
          <div class="col-sm-12">
            <div class="card">
              <div class="card-body">
                <div class="row">
                  <div class="col-sm-12">
                    <!-- 本社の使用者は使用不可-->
                    <ng-container *ngIf="this.pageModel.loginUser.loginrole !== 2">
                      <button class="btn btn-primary btn-sm gap_contact" style="margin-left:5px"
                        (click)="addTableDataModal(addTableDataModalContent)">
                        <i class="d-md-none d-block feather ft-plus white"></i>
                        <span class="d-md-block d-none">新　規</span></button>
                    </ng-container>
                    <button class="btn btn-danger btn-sm gap_contact" style="margin-left:5px"
                      (click)="deleteCheckedRow()">
                      <i class="d-md-none d-block feather ft-plus white"></i>
                      <span class="d-md-block d-none">削　除</span></button>
                  </div>
                </div>
              </div>
              <div class="table-responsive card-body">
                <!-- <table class="table grid-breakpoints">
                  <thead>
                    <tr>
                      <th scope="col" class="thcolor"><input type="checkbox" [checked]="isAllChecked()"
                          (change)="checkAll($event)">
                      </th>
                      <th scope="col" class="thcolor">No.</th>
                      <th scope="col" class="thcolor" (click)="sortData('companyName')">会社名
                        <i *ngIf="pageModel.sort.companyNameUp" class="la la-sort-up"></i>
                        <i *ngIf="pageModel.sort.companyNameDown" class="la la-sort-down"></i>
                      </th>
                      <th scope="col" class="thcolor" (click)="sortData('name')">ユーザー姓名
                        <i *ngIf="pageModel.sort.nameUp" class="la la-sort-up"></i>
                        <i *ngIf="pageModel.sort.nameDown" class="la la-sort-down"></i>
                      </th>
                      <th scope="col" class="thcolor">メール</th>
                      <th scope="col" class="thcolor" (click)="sortData('username')">ログインID
                        <i *ngIf="pageModel.sort.usernameUp" class="la la-sort-up"></i>
                        <i *ngIf="pageModel.sort.usernameDown" class="la la-sort-down"></i>
                      </th>
                      <th scope="col" class="thcolor" (click)="sortData('address')">住所
                        <i *ngIf="pageModel.sort.addressUp" class="la la-sort-up"></i>
                        <i *ngIf="pageModel.sort.addressDown" class="la la-sort-down"></i>
                      </th>
                      <th scope="col" class="thcolor">ユーザー数</th>
                      <th scope="col" class="thcolor">デバイス数</th>
                      <th scope="col" class="thcolor">操　作　</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let element of PaginationData;let i = index">
                      <td>
                        <input type="checkbox" [checked]="element.isSelected" (change)="checkChange($event,element)">
                      </td>
                      <td>{{(page-1)*pageSize+i+1}}</td>
                      <td>{{ element.companyName }}</td>
                      <td>{{ element.name}}</td>
                      <td>{{ element.email }}</td>
                      <td>{{ element.username }}</td>
                      <td>{{ element.address}}</td>
                      <td>{{ element.userCount}}</td>
                      <td>{{ element.deviceCount}}</td>
                      <td>
                        <a [routerLink]="" class="primary edit mr-1 mrless"
                          (click)="editTableDataModal(editTableDataModalContent, element)"><i class="la la-pencil"></i>
                        </a>
                        <a class="danger delete mr-1 mrless"><i class="la la-trash-o"
                            (click)="deleteRow(element)"></i></a>
                      </td>
                    </tr>
                  </tbody>
                </table> -->
                <p-treeTable #tt [value]="files" [columns]="cols">
                  <ng-template pTemplate="caption">
                    <div style="text-align: right">
                      <i class="pi pi-search" style="margin:4px 4px 0 0"></i>
                      <input type="text" pInputText size="50" placeholder="Global Filter"
                        (input)="tt.filterGlobal($event.target.value, 'contains')" style="width:auto">
                    </div>
                  </ng-template>
                  <ng-template pTemplate="header" let-columns>
                    <tr>
                      <!-- <th scope="col" class="thcolor"><input type="checkbox" [checked]="isAllChecked()"
                          (change)="checkAll($event)">
                      </th> -->
                      <th></th>
                      <th>
                        <a>操作</a>
                      </th>
                      <th *ngFor="let col of cols" [ttSortableColumn]="col.field">
                        {{col.header}}
                        <p-treeTableSortIcon [field]="col.field"></p-treeTableSortIcon>
                      </th>

                    </tr>
                    <!-- <tr>
                      <th *ngFor="let col of cols">
                        <input pInputText type="text"
                          (input)="tt.filter($event.target.value, col.field, col.filterMatchMode)">
                      </th>
                      <th>
                        <a>操作</a>
                      </th>
                    </tr> -->
                  </ng-template>
                  <ng-template pTemplate="body" let-rowNode let-rowData="rowData">
                    <tr>
                      <td>
                        <input type="checkbox" [checked]="rowData.isSelected" (change)="checkChange($event,rowData)">
                      </td>
                      <td>
                        <a class="primary edit mr-1 mrless" title="編集"
                          (click)="editTableDataModal(editTableDataModalContent, element)"><i class="la la-pencil"></i>
                        </a>
                        <a class="danger delete mr-1 mrless" title="削除"><i class="la la-trash-o"
                            (click)="deleteRow(element)"></i></a>
                        <a class="primary add mr-1 mrless" title="新規"
                          (click)="addRowTableDataModal(editTableNewDataModalContent, element)">
                          <i class="feather ft-plus"></i></a>
                      </td>
                      <td *ngFor="let col of cols; let i = index">
                        <p-treeTableToggler [rowNode]="rowNode" *ngIf="i == 0"></p-treeTableToggler>
                        {{rowData[col.field]}}
                      </td>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="emptymessage">
                    <tr>
                      <td [attr.colspan]="cols.length">No data found.</td>
                    </tr>
                  </ng-template>
                </p-treeTable>
                <!-- <div class="d-flex justify-content-between p-2">
                  <ngb-pagination [collectionSize]="collectionSize" [(page)]="page" [pageSize]="pageSize">
                  </ngb-pagination>
                  <select class="custom-select" style="width: auto" [(ngModel)]="pageSize">
                    <option [ngValue]="10">10 items per page</option>
                    <option [ngValue]="20">20 items per page</option>
                    <option [ngValue]="50">50 items per page</option>
                    <option [ngValue]="100">100 items per page</option>
                  </select>
                </div> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<p-toast position="top-right" key="alertModal" baseZIndex="999"></p-toast>
<p-confirmDialog [baseZIndex]="10000" rejectButtonStyleClass="p-button-secondary" icon="pi pi-exclamation-triangle"
  acceptLabel="確認" rejectLabel="取消">
</p-confirmDialog>


<ng-template #editTableDataModalContent let-c="close" let-d="dismiss">
  <form (ngSubmit)="onUpdate(editUpdateForm)" #editUpdateForm="ngForm">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">編集</h5>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="form-group col-lg-6 col-md-12">
          <h6>ログインID（メール）<code>＊</code></h6>
          <input type="text" [(ngModel)]="selectedContact.username" #editusername="ngModel" name="username"
            id="username" class="name form-control" placeholder="ユーザー名" disabled maxlength="50">
        </div>
        <div class="form-group col-lg-3 col-md-12">
          <h6>姓<code>＊</code></h6>
          <input type="text" [(ngModel)]="selectedContact.name" #editname="ngModel" name="name" id="name"
            class="name form-control" placeholder="" disabled maxlength="50">
        </div>
        <div class="form-group col-lg-3 col-md-12">
          <h6>名<code>＊</code></h6>
          <input type="text" [(ngModel)]="selectedContact.name" #editname="ngModel" name="name" id="name"
            class="name form-control" placeholder="" disabled maxlength="50">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>権限<code>＊</code></h6>
          <!-- <select class="form-control" id="role" name="role" [(ngModel)]="selectedContact.role" #editrole="ngModel"
            class="name form-control">
            <option [value]=1>管理者</option>
            <option [value]=2>使用者</option>
          </select> -->
          <input type="checkbox">
          <input type="checkbox">
          <input type="checkbox">
          <input type="checkbox">
        </div>
        <div class="form-group col-lg-6 col-md-12">

        </div>
        <div class="form-group col-lg-12 col-md-12">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>会社名<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.updataUserInfo.companyname" #editcompanyname="ngModel"
            name="companyname" id="companyname" class="name form-control" placeholder="会社名" maxlength="50">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>法人番号<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.updataUserInfo.corporatenumber" #editcorporatenumber="ngModel"
            name="corporatenumber" id="corporatenumber" class="name form-control" placeholder="法人番号" maxlength="13">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>住所</h6>
          <input type="text" [(ngModel)]="pageModel.updataUserInfo.address" #editaddress="ngModel" name="address"
            id="address" class="name form-control" placeholder="アドレス" maxlength="100">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>業種</h6>
          <input type="text" [(ngModel)]="pageModel.updataUserInfo.industry" #editindustry="ngModel" name="industry"
            id="industry" class="name form-control" placeholder="業種" maxlength="50">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>メール</h6>
          <input type="text" [(ngModel)]="pageModel.updataUserInfo.mail" #editmail="ngModel" name="mail" id="mail"
            class="name form-control" placeholder="メール" maxlength="50">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>電話</h6>
          <input type="text" [(ngModel)]="pageModel.updataUserInfo.tel" #edittel="ngModel" name="tel" id="tel"
            class="name form-control" placeholder="電話" maxlength="13">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>Fax</h6>
          <input type="text" [(ngModel)]="pageModel.updataUserInfo.fax" #editfax="ngModel" name="fax" id="fax"
            class="name form-control" placeholder="Fax" maxlength="13">
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <div class="form-group position-relative has-icon-left mb-0">
        <button type="submit" class="btn btn-secondary cancel-btn mr-1" (click)="cancleModel(editUpdateForm)">
          <span class="d-sm-inline d-none">取消</span>
        </button>
      </div>
      <div class="form-group position-relative has-icon-left mb-0">
        <button type="submit" id="edit-contact-item" class="btn btn-info edit-contact-item" data-dismiss="modal"><i
            class="la la-paper-plane-o d-lg-none"></i> <span class="d-none d-lg-block">保存</span></button>
      </div>
      <!-- <div class="footer">
        <span *ngIf="pageModel.result.retcode =='0000'" style="color:blue">{{pageModel.result.retcode}}　{{pageModel.result.message}}</span>
        <span *ngIf="pageModel.result.retcode !='0000'" class="text-danger">{{pageModel.result.retcode}}　{{pageModel.result.message}}</span>
      </div> -->
    </div>
  </form>
</ng-template>
<ng-template #addTableDataModalContent let-c="close" let-d="dismiss">
  <!-- <form #editAddForm="ngForm"> -->
  <form #addForm="ngForm">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">新規</h5>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="form-group col-lg-6 col-md-12">
          <h6>ユーザー名<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.username" #editname="ngModel" name="username"
            id="username" class="name form-control" placeholder="半角英数で入力してください"
            [ngClass]="{ 'is-invalid': addForm.submitted && editname.invalid }" required>
          <div *ngIf="addForm.submitted && editname.invalid" class="invalid-feedback">
            <div *ngIf="editname.errors.required">ユーザー名を入力してください</div>
          </div>
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>新規種類<code>＊</code></h6>

          <select class="form-control" id="role" name="role" [(ngModel)]="pageModel.adduserInfo.role" #addrole="ngModel"
            class="name form-control" [ngClass]="{ 'is-invalid': addForm.submitted && addrole.invalid }" required>
            <option [value]=1>他社新規（管理者）</option>
            <option *ngIf="pageModel.loginUser.loginrole === 1" [value]=2>自社新規（使用者）</option>
          </select>
          <div *ngIf="addForm.submitted && addrole.invalid" class="invalid-feedback">
            <div *ngIf="addrole.errors.required">新規種類を選択してください</div>
          </div>
        </div>
      </div>
      <ng-container *ngIf="pageModel.adduserInfo.role === '1'; else elseTemplate">
        <!-- <div class="form-group col-lg-6 col-md-12">
          <h6>上位管理者<code>＊</code></h6>
          <select class="form-control" name="upperuser" id="upperuser" [(ngModel)]="pageModel.adduserInfo.upperuserid"
            placeholder="選択してください。" #editupperuser="ngModel" (ngModelChange)="getMyUnderCompanies()"
            [ngClass]="{ 'is-invalid': addForm.submitted && editupperuser.invalid }" required>
            <option *ngFor="let user of userAll; let i = index" [ngValue]="user.userid">
              {{user.lastname + " " + user.firstname}}
            </option>
          </select>
          <div *ngIf="addForm.submitted && editupperuser.invalid" class="invalid-feedback">
            <div *ngIf="editupperuser.errors.required">上位管理者を選択してください</div>
          </div>
        </div> -->

        <div class="form-group col-lg-12 col-md-12">
          <ul class="nav nav-tabs _bottom nav-underline no-hover-bg tabsborder">
            <ngb-tabset>
              <ngb-tab title="会社情報">
                <ng-template ngbTabContent>
                  <h4 class="form-section">会社情報</h4>
                  <div class="row">
                    <div class="form-group col-lg-6 col-md-12">
                      <h6 style="width: 410px;">会社名<code>＊</code></h6>
                      <select class="form-control" name="company" id="company"
                        [(ngModel)]="pageModel.adduserInfo.companyInfo.companyid" placeholder="選択してください。"
                        #editname="ngModel" (change)="show()"
                        [ngClass]="{ 'is-invalid': addForm.submitted && editname.invalid }" required>
                        <option *ngFor="let companyInfo of pageModel.myCompanyInfoAll; let i = index"
                          [ngValue]="companyInfo.companyid">
                          {{companyInfo.companyname}}
                        </option>
                      </select>
                      <div *ngIf="addForm.submitted && editname.invalid" class="invalid-feedback">
                        <div *ngIf="editname.errors.required">ユーザータイプを選んでください</div>
                      </div>
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>法人番号<code>＊</code></h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.companyInfo.corporatenumber"
                        #editversion="ngModel" name="corporatenumber" id="corporatenumber" class="name form-control"
                        placeholder="法人番号" disabled maxlength="13">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>住所</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.companyInfo.address" #editversion="ngModel"
                        name="address" id="address" class="name form-control" placeholder="住所" disabled maxlength="100">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>業種</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.companyInfo.industry" #editversion="ngModel"
                        name="industry" id="industry" class="name form-control" placeholder="業種" disabled
                        maxlength="50">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>メール</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.companyInfo.mail" #editversion="ngModel"
                        name="mail" id="mail" class="name form-control" placeholder="メール" disabled maxlength="50">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>電話</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.companyInfo.tel" #editversion="ngModel"
                        name="tel" id="tel" class="name form-control" placeholder="電話" disabled maxlength="13">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>Fax</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.companyInfo.fax" #editversion="ngModel"
                        name="fax" id="fax" class="name form-control" placeholder="Fax" disabled maxlength="13">
                    </div>
                  </div>
                  <div class="modal-footer">
                    <div class="form-group position-relative has-icon-left mb-0">
                      <button type="reset" class="btn btn-secondary cancel-btn mr-1" (click)="cancleModel(addForm)">
                        <!-- <i class='ficon feather ft-x mr-25'></i> -->
                        <span class="d-sm-inline d-none">取消</span>
                      </button>
                    </div>
                    <div class="form-group position-relative has-icon-left mb-0">
                      <button type="submit" id="edit-contact-item" class="btn btn-info edit-contact-item"
                        data-dismiss="modal"><i class="la la-paper-plane-o d-lg-none"></i> <span
                          class="d-none d-lg-block" (click)="addCompUser(addForm)">登録</span></button>
                    </div>
                  </div>
                </ng-template>
              </ngb-tab>
              <ngb-tab title="新規会社">
                <ng-template ngbTabContent>
                  <h4 class="form-section">新規会社情報</h4>
                  <div class="row">
                    <div class="form-group col-lg-6 col-md-12">
                      <h6 style="width: 410px;">会社名<code>＊</code></h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.companyname"
                        #editname="ngModel" name="companyname" id="companyname" class="name form-control"
                        placeholder="会社名" [ngClass]="{ 'is-invalid': addForm.submitted && editname.invalid }" required>
                      <div *ngIf="addForm.submitted && editname.invalid" class="invalid-feedback">
                        <div *ngIf="editname.errors.required">会社名を入力してください</div>
                      </div>
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>法人番号<code>＊</code></h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.corporatenumber"
                        #addcorporatenumber="ngModel" name="corporatenumber" id="corporatenumber"
                        class="name form-control" placeholder="法人番号"
                        [ngClass]="{ 'is-invalid': addForm.submitted && addcorporatenumber.invalid }" required>
                      <div *ngIf="addForm.submitted && addcorporatenumber.invalid" class="invalid-feedback"
                        maxlength="13">
                        <div *ngIf="addcorporatenumber.errors.required">法人番号を入力してください</div>
                      </div>
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>住所</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.address"
                        #editversion="ngModel" name="address" id="address" class="name form-control" placeholder="住所"
                        maxlength="100">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>業種</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.industry"
                        #editversion="ngModel" name="industry" id="industry" class="name form-control" placeholder="業種"
                        maxlength="50">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>メール</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.mail" #editversion="ngModel"
                        name="mail" id="mail" class="name form-control" placeholder="メール" maxlength="50">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>電話</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.tel" #editversion="ngModel"
                        name="tel" id="tel" class="name form-control" placeholder="電話" maxlength="13">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                      <h6>Fax</h6>
                      <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.fax" #editversion="ngModel"
                        name="fax" id="fax" class="name form-control" placeholder="Fax" maxlength="13">
                    </div>
                    <div class="form-group col-lg-6 col-md-12">
                    </div>
                  </div>
                  <div class="modal-footer">
                    <div class="form-group position-relative has-icon-left mb-0">
                      <button type="reset" class="btn btn-secondary cancel-btn mr-1" (click)="cancleModel(addForm)">
                        <!-- <i class='ficon feather ft-x mr-25'></i> -->
                        <span class="d-sm-inline d-none">取消</span>
                      </button>
                    </div>
                    <div class="form-group position-relative has-icon-right mb-0">
                      <button type="submit" id="edit-contact-item" class="btn btn-info edit-contact-item"
                        data-dismiss="modal" data-dismiss="modal"><span class="d-none d-lg-block"
                          (click)="addNewCompUser(addForm)" aria-label="Close">登録</span></button>
                    </div>
                  </div>
                </ng-template>
              </ngb-tab>
            </ngb-tabset>
          </ul>
        </div>
      </ng-container>

      <ng-template #elseTemplate>
        <div class="modal-footer-R">
          <div class="form-group position-relative has-icon-left mb-0">
            <button type="reset" class="btn btn-secondary cancel-btn mr-1" (click)="cancleModel(addForm)">
              <!-- <i class='ficon feather ft-x mr-25'></i> -->
              <span class="d-sm-inline d-none">取消</span>
            </button>
          </div>
          <div class="form-group position-relative has-icon-right mb-0">
            <button type="submit" id="edit-contact-item" class="btn btn-info edit-contact-item" data-dismiss="modal"
              data-dismiss="modal"><span class="d-none d-lg-block" (click)="addMyCompUser(addForm)"
                aria-label="Close">登録</span></button>
          </div>
        </div>
      </ng-template>
    </div>
  </form>
</ng-template>

<ng-template #editTableNewDataModalContent let-c="close" let-d="dismiss">
  <form (ngSubmit)="addTargetDate(addTargetForm)" #addTargetForm="ngForm">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">代理新規</h5>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="form-group col-lg-10 col-md-12">
          <h6>ログインID（メール）<code>＊</code></h6>
          <!-- <input type="text" id="loginid" class="form-control" formControlName="email" placeholder="E-mail"
            [ngClass]="{ 'is-invalid': submitted && f.email.errors }" />
          <small class="form-text text-muted danger" *ngIf="submitted && f.email.errors" class="invalid-feedback">
            <div *ngIf="f.email.errors.required">ログインID（メール）を入力してください。</div>
            <div *ngIf="f.email.errors.email">有効なメールを入力してください。</div>
          </small> -->
          <input type="text" [(ngModel)]="pageModel.adduserInfo.username" #addLoginid="ngModel" name="loginid"
            id="loginid" class="name form-control" placeholder="メールアドレス" maxlength="50"
            [ngClass]="{ 'is-invalid': addTargetForm.submitted && addLoginid.invalid }" required>
          <div *ngIf="addTargetForm.submitted && addLoginid.invalid" class="invalid-feedback">
            <div *ngIf="addLoginid.errors.required">ログインIDを入力してください</div>
          </div>
        </div>
        <div class="form-group col-lg-10 col-md-12">
          <h6>パスワード<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.password" #addFirstname="ngModel" name="firstname"
            id="firstname" class="name form-control" placeholder="" maxlength="50">
        </div>
        <div class="form-group col-lg-10 col-md-12">
          <h6>確認パスワード<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.newPassword" #addFirstname="ngModel" name="firstname"
            id="firstname" class="name form-control" placeholder="" maxlength="50">
        </div>
        <div class="form-group col-lg-4 col-md-12">
          <h6>姓<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.lastname" #addLastname="ngModel" name="lastname"
            id="lastname" class="name form-control" placeholder="" maxlength="50">
        </div>
        <div class="form-group col-lg-4 col-md-12">
          <h6>名<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.firstname" #addFirstname="ngModel" name="firstname"
            id="firstname" class="name form-control" placeholder="" maxlength="50">
        </div>
        <div class="form-group col-lg-12 col-md-12">
          <h6>権限<code>＊</code></h6>
          <div class="card-content">
            <div class="card-body">
              <div class="d-inline-block custom-control custom-radio mr-1">
                <input type="radio" class="custom-control-input" name="colorRadio" id="radio3">
                <label class="custom-control-label" for="radio3">使用者</label>
              </div>
              <div class="d-inline-block custom-control custom-radio mr-1">
                <input type="radio" class="custom-control-input" name="colorRadio" id="radio4" checked>
                <label class="custom-control-label" for="radio4" checked>管理者</label>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group col-lg-9 col-md-12">
          会社名：<input type="text" [(ngModel)]="pageModel.adduserInfo.companyname" #addcompanyname="ngModel"
            name="companyname" id="companyname" class="name form-control" placeholder="" maxlength="50" disabled>
        </div>
        <div class="form-group col-lg-12 col-md-12">
          <button type="button" class="btn btn-primary" (click)="addCompanyDataModal(addNewCompanyModalContent)">
            <i class="feather ft-plus"></i> 新規会社
          </button><a style="color: blue;">（新規代理店の場合、ご利用ください）</a>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <div class="form-group position-relative has-icon-left mb-0">
        <button type="submit" class="btn btn-secondary cancel-btn mr-1" (click)="cancleModel(addTargetForm)">
          <span class="d-sm-inline d-none">取消</span>
        </button>
      </div>
      <div class="form-group position-relative has-icon-left mb-0">
        <button type="submit" id="edit-contact-item" class="btn btn-info edit-contact-item" data-dismiss="modal"><i
            class="la la-paper-plane-o d-lg-none"></i> <span class="d-none d-lg-block">登録</span></button>
      </div>
    </div>
  </form>
</ng-template>

<!-- 新規会社 -->
<ng-template #addNewCompanyModalContent let-c="close" let-d="dismiss">
  <form #addCompanyForm="ngForm">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">新規会社</h5>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">

      <div class="row">
        <div class="form-group col-lg-6 col-md-12">
          <h6 style="width: 410px;">会社名<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.companyname" #addCompanyName="ngModel"
            name="companyname" id="companyname" class="name form-control" placeholder="会社名"
            [ngClass]="{ 'is-invalid': addCompanyForm.submitted && addCompanyName.invalid }" required>
          <div *ngIf="addCompanyForm.submitted && addCompanyName.invalid" class="invalid-feedback">
            <div *ngIf="addCompanyName.errors.required">会社名を入力してください</div>
          </div>
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>法人番号<code>＊</code></h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.corporatenumber"
            #addcorporatenumber="ngModel" name="corporatenumber" id="corporatenumber" class="name form-control"
            placeholder="法人番号" [ngClass]="{ 'is-invalid': addCompanyForm.submitted && addcorporatenumber.invalid }"
            required>
          <div *ngIf="addCompanyForm.submitted && addcorporatenumber.invalid" class="invalid-feedback" maxlength="13">
            <div *ngIf="addcorporatenumber.errors.required">法人番号を入力してください</div>
          </div>
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>住所</h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.address" #editversion="ngModel"
            name="address" id="address" class="name form-control" placeholder="住所" maxlength="100">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>業種</h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.industry" #editversion="ngModel"
            name="industry" id="industry" class="name form-control" placeholder="業種" maxlength="50">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>メール</h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.mail" #editversion="ngModel" name="mail"
            id="mail" class="name form-control" placeholder="メール" maxlength="50">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>電話</h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.tel" #editversion="ngModel" name="tel"
            id="tel" class="name form-control" placeholder="電話" maxlength="13">
        </div>
        <div class="form-group col-lg-6 col-md-12">
          <h6>Fax</h6>
          <input type="text" [(ngModel)]="pageModel.adduserInfo.newCompanyInfo.fax" #editversion="ngModel" name="fax"
            id="fax" class="name form-control" placeholder="Fax" maxlength="13">
        </div>
        <div class="form-group col-lg-6 col-md-12">
        </div>
      </div>
      <div class="modal-footer">
        <div class="form-group position-relative has-icon-left mb-0">
          <button type="reset" class="btn btn-secondary cancel-btn mr-1" (click)="cancleModel(addTargetForm)">
            <!-- <i class='ficon feather ft-x mr-25'></i> -->
            <span class="d-sm-inline d-none">取消</span>
          </button>
        </div>
        <div class="form-group position-relative has-icon-right mb-0">
          <button type="submit" id="edit-contact-item" class="btn btn-info edit-contact-item" data-dismiss="modal"
            data-dismiss="modal"><span class="d-none d-lg-block" (click)="addNewCompUser(addTargetForm)"
              aria-label="Close">確認</span></button>
        </div>
      </div>
    </div>
  </form>
</ng-template>